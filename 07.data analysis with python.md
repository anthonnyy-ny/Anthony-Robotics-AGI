


æ‚¨å•çš„ **`loc`** å‡½æ•¸ï¼ˆæˆ–æ›´æº–ç¢ºåœ°èªªï¼Œæ˜¯ Pandas DataFrame çš„ä¸€å€‹**å±¬æ€§/æ–¹æ³•**ï¼‰æ˜¯ Python æ•¸æ“šåˆ†æä¸­æœ€æ ¸å¿ƒã€æœ€å¸¸ç”¨çš„å·¥å…·ä¹‹ä¸€ã€‚

å®ƒä¾†è‡ª **Pandas åº«**ï¼Œå°ˆé–€ç”¨æ–¼å°æ•¸æ“šé€²è¡Œ**åŸºæ–¼æ¨™ç±¤ (Label-based)** çš„è³‡æ–™é¸å–å’Œåˆ‡ç‰‡ã€‚

---

## ğŸ” Pandas `.loc` çš„ä½œç”¨

`loc` çš„å…¨åæ˜¯ **Location (ä½ç½®)**ï¼Œå®ƒæ˜¯ç”¨ä¾†æ ¹æ“š **è¡Œç´¢å¼•çš„åç¨±** å’Œ **åˆ—çš„åç¨±** ä¾†é¸æ“‡æ•¸æ“šçš„ã€‚

### 1. æ ¸å¿ƒèªæ³•

`loc` å§‹çµ‚éµå¾ªä»¥ä¸‹çµæ§‹ï¼Œä½¿ç”¨æ–¹æ‹¬è™Ÿ `[]` é€²è¡Œæ“ä½œï¼š

$$df.loc[è¡Œé¸æ“‡æ¢ä»¶, åˆ—é¸æ“‡æ¢ä»¶]$$

|**åƒæ•¸**|**èªªæ˜**|
|---|---|
|**è¡Œé¸æ“‡æ¢ä»¶**|å¯ä»¥æ˜¯å–®å€‹è¡Œæ¨™ç±¤åã€æ¨™ç±¤åˆ—è¡¨ã€æ¨™ç±¤åˆ‡ç‰‡ï¼Œæˆ–æ˜¯ä¸€å€‹å¸ƒæ—æ¢ä»¶ã€‚|
|**åˆ—é¸æ“‡æ¢ä»¶**|å¯ä»¥æ˜¯å–®å€‹åˆ—åã€åˆ—ååˆ—è¡¨ï¼Œæˆ–æ˜¯ä¸€å€‹åˆ—ååˆ‡ç‰‡ã€‚|

### 2. `.loc` çš„é—œéµç‰¹æ€§ï¼ˆèˆ‡å…¶ä»–æ–¹æ³•çš„å€åˆ¥ï¼‰

- **åŸºæ–¼æ¨™ç±¤ (Label-based)ï¼š** é€™æ˜¯ `.loc` èˆ‡ `.iloc`ï¼ˆåŸºæ–¼æ•´æ•¸ä½ç½®ï¼‰æœ€ä¸»è¦çš„å€åˆ¥ã€‚
    
- **åˆ‡ç‰‡åŒ…å«çµ‚é»ï¼š** ç•¶æ‚¨ä½¿ç”¨æ¨™ç±¤é€²è¡Œåˆ‡ç‰‡æ™‚ï¼Œ**çµæŸçš„æ¨™ç±¤ä¹Ÿæ˜¯åŒ…å«åœ¨å…§çš„**ã€‚
    
    - _ä¾‹å¦‚ï¼š_ `df.loc['a':'c']` æœƒåŒ…å«åç‚º 'a', 'b', **'c'** çš„è¡Œã€‚
        

### 3. å¯¦ç”¨ç¯„ä¾‹

å‡è¨­æ‚¨æœ‰ä¸€å€‹ DataFrame å« `df_students`ï¼Œå…¶è¡Œç´¢å¼•æ˜¯å­¸è™Ÿï¼Œåˆ—åæ˜¯æˆç¸¾ï¼š

|**å­¸è™Ÿ (Index)**|**åœ‹æ–‡ (Chinese)**|**æ•¸å­¸ (Math)**|**è‹±æ–‡ (English)**|
|---|---|---|---|
|**S001**|90|85|95|
|**S002**|78|92|88|
|**S003**|65|70|75|

|**é¸æ“‡æ“ä½œ**|**ä½œç”¨**|**çµæœ**|
|---|---|---|
|`df.loc['S001']`|é¸æ“‡å–®å€‹è¡Œæ¨™ç±¤ç‚º 'S001' çš„å­¸ç”Ÿã€‚|S001 å­¸ç”Ÿæ‰€æœ‰ç§‘ç›®çš„æˆç¸¾ã€‚|
|`df.loc[:, 'æ•¸å­¸']`|é¸æ“‡æ‰€æœ‰è¡Œï¼Œä½†åªé¸æ“‡åç‚º 'æ•¸å­¸' çš„åˆ—ã€‚|æ‰€æœ‰å­¸ç”Ÿçš„æ•¸å­¸æˆç¸¾ã€‚|
|`df.loc['S001':'S002', 'åœ‹æ–‡':'æ•¸å­¸']`|**åŸºæ–¼æ¨™ç±¤åˆ‡ç‰‡**ï¼Œé¸æ“‡ S001 åˆ° S002 çš„å­¸ç”Ÿï¼Œä»¥åŠåœ‹æ–‡åˆ°æ•¸å­¸çš„æˆç¸¾ã€‚|åŒ…å« S001 å’Œ S002 çš„åœ‹æ–‡å’Œæ•¸å­¸æˆç¸¾ã€‚|

### 4. æœ€å¼·å¤§çš„ç”¨æ³•ï¼šå¸ƒæ—é®ç½© (Boolean Mask)

`.loc` ç¶“å¸¸èˆ‡æ¢ä»¶åˆ¤æ–·çµåˆä½¿ç”¨ï¼Œé€™æ˜¯æ•¸æ“šæ¸…æ´—å’Œç¯©é¸çš„æ ¸å¿ƒï¼š

Python

```
# ç¯„ä¾‹ï¼šé¸å‡ºæ•¸å­¸æˆç¸¾å¤§æ–¼ 80 åˆ†çš„å­¸ç”Ÿï¼Œä¸¦æŸ¥çœ‹ä»–å€‘çš„è‹±æ–‡æˆç¸¾
high_math_scores = df_students['æ•¸å­¸'] > 80

# df_students.loc[å¸ƒæ—æ¢ä»¶, é¸æ“‡åˆ—]
result = df_students.loc[high_math_scores, ['åœ‹æ–‡', 'è‹±æ–‡']]

print(result)
# å°‡åªé¡¯ç¤º S001 å’Œ S002 çš„åœ‹æ–‡å’Œè‹±æ–‡æˆç¸¾
```

---------------------------------------------------